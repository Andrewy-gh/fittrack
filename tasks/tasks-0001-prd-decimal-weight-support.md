# Task List: Decimal Weight Support

> Generated from: `0001-prd-decimal-weight-support.md`

## Relevant Files

### Database
- `server/migrations/00013_change_weight_to_numeric.sql` - New migration to change weight column from INTEGER to NUMERIC(10,1)
- `server/schema.sql` - Update to reflect new NUMERIC type for weight column
- `server/internal/database/models.go` - Auto-generated by sqlc, will be regenerated after schema change
- `server/internal/database/query.sql.go` - Auto-generated by sqlc, will be regenerated after schema change

### Backend - Models & Types
- `server/internal/workout/models.go` - Update SetInput, SetData, PGSetData to use float64 for weight
- `server/internal/workout/swagger_types.go` - Update SetResponse and WorkoutWithSetsResponse to use float64
- `server/internal/exercise/swagger_types.go` - Update ExerciseWithSetsResponse and RecentSetsResponse to use float64
- `server/internal/workout/repository.go` - Update convertToPGTypes() to handle pgtype.Numeric conversion

### Frontend - Utilities
- `client/src/lib/utils.ts` - Add formatWeight() utility function for smart decimal display
- `client/src/lib/utils.test.ts` - Unit tests for formatWeight() function

### Frontend - Components
- `client/src/routes/_layout/workouts/-components/add-set-dialog.tsx` - Add step="0.1" and min="0" to weight input
- `client/src/components/form/input-field.tsx` - May need updates for decimal handling (review needed)
- `client/src/routes/_layout/workouts/-components/exercise-screen.tsx` - Apply formatWeight() to weight display
- `client/src/components/exercises/exercise-detail.tsx` - Apply formatWeight() to weight calculations and display
- `client/src/routes/_layout/workouts/-components/form-options.ts` - Review default weight value handling

### Backend - Tests
- `server/internal/workout/handler_test.go` - Add test cases for decimal weight validation and handling
- `server/internal/workout/repository_test.go` - Add test cases for pgtype.Numeric conversion (create if doesn't exist)

### Frontend - Tests
- `client/src/lib/utils.test.ts` - Unit tests for formatWeight() utility
- `client/src/routes/_layout/workouts/-components/add-set-dialog.test.tsx` - Add tests for decimal weight input (create if doesn't exist)

### Notes
- Backend uses `sqlc` to auto-generate database code - run `sqlc generate` after schema changes
- Frontend tests use Jest - run with `npx jest [optional/path/to/test/file]`
- Database migrations use Goose - migrations must have Up and Down scripts
- Backend validation uses go-playground/validator v10

## Tasks

- [ ] 1.0 Database Schema Migration
- [ ] 2.0 Backend Model and Type Updates
- [ ] 3.0 Backend Validation and API Updates
- [ ] 4.0 Frontend Formatting Utilities
- [ ] 5.0 Frontend Input and Display Updates
- [ ] 6.0 Testing and Validation
