# Exercise Order Feature - TODO List

## Overview
This document tracks all the tasks needed to implement the exercise and set ordering feature, including the recent request to add `workout_id` to the `GetRecentSetsForExercise` query.

## Database Changes

### 1. Update GetRecentSetsForExercise Query
- [ ] Modify `server/query.sql` to include `w.id as workout_id` in the SELECT clause
- [ ] Regenerate sqlc code: `sqlc generate -f sqlc.yaml`

## Backend Changes

### 2. Update Go Models
- [ ] Update `GetRecentSetsForExerciseRow` struct in `server/internal/database/query.sql.go` (auto-generated by sqlc)
- [ ] Update `exercise.RecentSetsResponse` struct in Swagger annotations
- [ ] Update any related model files if necessary

### 3. Service Layer
- [ ] Verify `GetRecentSetsForExercise` in `server/internal/exercise/service.go` still works correctly with new fields
- [ ] Update any transformation functions if needed

### 4. Repository Layer
- [ ] Verify `GetRecentSetsForExercise` in `server/internal/exercise/repository.go` still works correctly
- [ ] Update any repository methods if needed

### 5. Handler Layer
- [ ] Verify `GetRecentSetsForExercise` in `server/internal/exercise/handler.go` still works correctly
- [ ] Update Swagger documentation if needed

## Frontend Changes

### 6. Update TypeScript Models
- [ ] Regenerate TypeScript models from updated Swagger spec
- [ ] Update `exercise_RecentSetsResponse` type to include `workout_id`

### 7. Update Recent Sets Display Component
- [ ] Modify `client/src/routes/_auth/workouts/-components/recent-sets-display.tsx` to use `workout_id` for Link component
- [ ] Add Link component to navigate to workout details page

## Testing

### 8. Backend Testing
- [ ] Update unit tests for exercise service
- [ ] Update integration tests for exercise handler
- [ ] Verify all tests pass with new `workout_id` field

### 9. Frontend Testing
- [ ] Test navigation from recent sets to workout details
- [ ] Verify correct workout IDs are used in links
- [ ] Check UI rendering with new Link components

## Documentation

### 10. Update Documentation
- [ ] Update API documentation to reflect new `workout_id` field
- [ ] Update any relevant README files or guides

## Deployment

### 11. Deployment Checklist
- [ ] Verify database query changes are backward compatible
- [ ] Test in staging environment
- [ ] Prepare migration script if needed (not expected for this change)
- [ ] Deploy to production

## Verification

### 12. Post-Deployment Verification
- [ ] Verify recent sets display correctly with workout links
- [ ] Test navigation between exercise and workout pages
- [ ] Confirm no regressions in existing functionality