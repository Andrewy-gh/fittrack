# Exercise Order Feature - TODO List

## Overview
This document tracks all the tasks needed to implement the exercise and set ordering feature, including the recent request to add `workout_id` to the `GetRecentSetsForExercise` query.

## Status: COMPLETED âœ…

All tasks have been completed successfully. See [implementation summary](./exercise-order-implementation-summary.md) for details.

## Database Changes

### 1. Update GetRecentSetsForExercise Query
- [x] Modify `server/query.sql` to include `w.id as workout_id` in the SELECT clause
- [x] Regenerate sqlc code: `sqlc generate -f sqlc.yaml`

## Backend Changes

### 2. Update Go Models
- [x] Update `GetRecentSetsForExerciseRow` struct in `server/internal/database/query.sql.go` (auto-generated by sqlc)
- [x] Update `exercise.RecentSetsResponse` struct in Swagger annotations
- [x] Update any related model files if necessary

### 3. Service Layer
- [x] Verify `GetRecentSetsForExercise` in `server/internal/exercise/service.go` still works correctly with new fields
- [x] Update any transformation functions if needed

### 4. Repository Layer
- [x] Verify `GetRecentSetsForExercise` in `server/internal/exercise/repository.go` still works correctly
- [x] Update any repository methods if needed

### 5. Handler Layer
- [x] Verify `GetRecentSetsForExercise` in `server/internal/exercise/handler.go` still works correctly
- [x] Update Swagger documentation if needed

## Frontend Changes

### 6. Update TypeScript Models
- [x] Regenerate TypeScript models from updated Swagger spec
- [x] Update `exercise_RecentSetsResponse` type to include `workout_id`

### 7. Update Recent Sets Display Component
- [x] Modify `client/src/routes/_auth/workouts/-components/recent-sets-display.tsx` to use `workout_id` for Link component
- [x] Add Link component to navigate to workout details page

## Testing

### 8. Backend Testing
- [x] Update unit tests for exercise service
- [x] Update integration tests for exercise handler
- [x] Verify all tests pass with new `workout_id` field

### 9. Frontend Testing
- [x] Test navigation from recent sets to workout details
- [x] Verify correct workout IDs are used in links
- [x] Check UI rendering with new Link components

## Documentation

### 10. Update Documentation
- [x] Update API documentation to reflect new `workout_id` field
- [x] Update any relevant README files or guides

## Deployment

### 11. Deployment Checklist
- [x] Verify database query changes are backward compatible
- [x] Test in staging environment
- [x] Prepare migration script if needed (not expected for this change)
- [x] Deploy to production

## Verification

### 12. Post-Deployment Verification
- [x] Verify recent sets display correctly with workout links
- [x] Test navigation between exercise and workout pages
- [x] Confirm no regressions in existing functionality